<div class="support-request-templates-detail">
  <md-toolbar md-scroll-shrink>
    <div class="md-toolbar-tools">
      <h3>
        <span>Support Request Template: </span>
        <span ng-cloak>{{$ctrl.template.shortname}}</span>
      </h3>
      <span flex></span>
      <md-button
        ng-if="$ctrl.template"
        aria-label="Edit this support request template"
        ui-sref="help.support.request-templates.edit({id: $ctrl.template.id})">
        <md-icon>edit</md-icon>
        Edit
      </md-button>
      <md-button
        ng-if="$ctrl.template"
        aria-label="Delete this support request template"
        ng-click="$ctrl.deleteTemplate($event)">
        <md-icon>delete</md-icon>
        Delete
      </md-button>
    </div>
  </md-toolbar>

  <loading-indicator loading="$ctrl.loading"></loading-indicator>

  <md-content layout-padding ng-if="!$ctrl.loading && $ctrl.template">

    <div flex-sm="100" flex-gt-sm="90" flex-gt-md="70" flex-gt-lg="50" class="md-whiteframe-z2">
      <md-content layout-padding>
        <h3 class="md-title" layout="row">
          {{$ctrl.template.title}}
        </h3>

        <p class="md-body-1">
          <span md-colors="{color: 'blue-grey-700'}">
            Shortname (not shown to users):
          </span>
          {{$ctrl.template.shortname}}
        </p>

        <p class="md-body-1">
          <span md-colors="{color: 'blue-grey-700'}">
            Target GitHub repo:
          </span>
          {{$ctrl.template.git_hub_repo}}
        </p>

        <p class="md-body-1">
          <span md-colors="{color: 'blue-grey-700'}">
            Description:
          </span>
          <br />
          <span ng-bind-html='$ctrl.template.description | simpleFormat'></span>
        </p>

        <p class="md-body-1">
          <span md-colors="{color: 'blue-grey-700'}">
            User scope:
          </span>
          {{$ctrl.template.user_scope || '--'}}
        </p>

        <br />

        <md-divider></md-divider>

        <div>
          <h4 class="md-subhead centred">Form spec</h4>

          <p class="md-body-1">
            <span md-colors="{color: 'blue-grey-700'}">
              Form help text:
            </span>
            <br />
            {{$ctrl.template.form_spec.help_text}}
          </p>

          <br />

          <fields-listings
            title="Form fields for user to fill in"
            fields="$ctrl.template.form_spec.fields">
          </field-listings>
        </div>

        <md-divider></md-divider>

        <div>
          <h4 class="md-subhead centred">GitHub issue spec</h4>

          <p class="md-body-1">
            <span md-colors="{color: 'blue-grey-700'}">
              Issue title text:
            </span>
            {{$ctrl.template.git_hub_issue_spec.title_text}}
          </p>

          <p class="md-body-1">
            <span md-colors="{color: 'blue-grey-700'}">
              Issue body text preamble:
            </span>
            <br />
            {{$ctrl.template.git_hub_issue_spec.body_text_preamble}}
          </p>

          <br />

          <md-divider></md-divider>

          <br />

          <div layout="row" layout-align="center">
            <md-button class="md-raised" ui-sref="help.support.requests.new({id: $ctrl.template.id})">
              View as new support request
            </md-button>
          </div>
        </div>
      </md-content>
    </div>

  </md-content>

</div>
